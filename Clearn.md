# c++学习笔记

## 一、数据

（一）、数据的分类

数据有**数字**、**字符**和**字符**串三种类型。

数字：直接书写，如：100、18.52、0、9；

字符：用半角的单引号包含的**一个**符号，如：'A'、'Z'、'0'、'9'、'~'、'+'，汉字和全角的标点符号不是字符；

字符串：用半角的双引号包含的多个符号，如："Hello World"、"西施"、"100"、"X"。

（二）、输出数据

```
#include <iostream> 
using namespace std;
int main()
{
	int a = 10;
	std::cout << "a=" << a << std::endl
}
```

`std::cout`可以输出各种类型的数据;`<<`操作符可以拼接多个数据项；`std::endl`也可以用于换行；

（三）、输入数据

```
`#include <iostream>     // 包含头文件。`
`using namespace std;    // 指定缺省的命名空间。`
`int main()`
`{`
  `string name;     // 姓名。`
  `cout << "请输入姓名：";`
  `cin >> name;`
  `cout << "输入的姓名是：" << name << endl;`

  `bool yz;        // 颜值：true-漂亮；false-不漂亮。`
  `cout << "请问输入颜值（1-漂亮；0-不漂亮）：";`
  `cin >> yz;`
  `cout << "输入的颜值是：" << yz << endl;`
`}`
```

布尔型变量的值在计算机内部用1（true）和0（false）存储；程序中可以书写true和false，也可以书写1和0，其它值将强制转换成1；c）用cin输入时可以填1和0，其它值也强制转换成1；d）用cout输出时只显示1和0，不显示true和false。

## 二、注释

（一）、单行注释  //  ：用两根反斜线打头，一般放在代码的上方，或者一行语句的末尾。

（二）、多行注释  ：从`/*`开始，到`*/`结束，把一些内容夹住。

## 三、变量

变量在使用之前要先声明。

C++常用的数据类型有五种：整数（int）、浮点数（float和double）、字符（char）、字符串（string）和布尔（bool）。

其中double类型的浮点数的精度比float类型的高，常用double。bool类型的变量有true（1）和false（0）两种。

局域变量：在函数或语句块内部的语句使用，在函数或语句块外部是不可用的。局部变量在函数返回或语句块结束时由系统收回内存空间。

全局变量：在整个程序生命周期内都是有效的，在定义位置之后的任意函数中都能访问。全局变量在主程序退出时由系统收回内存空间。

静态局域变量：用static修饰的局部变量生命周期和程序相同，并且只会被初始化一次。其作用域为局部，当定义它的函数或语句块结束时，其作用域随之结束。当程序想要使用全局变量的时候应该先考虑使用static（考虑到数据安全性）。

## 四、常量

（一）、宏常量

一般在main函数的上面声明，用大写命名。    语法：`#define PI 3.14`

（二）、const修饰的变量

在程序的任何地方都可以声明。    语法：`const int pi = 3.14`

## 五、运算

|  运算符  |                描述                 |
| :------: | :---------------------------------: |
|    +     |             两个数相加              |
|    -     |         一个数减另一个数。          |
|    *     |            两个数相乘。             |
|    /     |           分子除以分母。            |
|    %     |      取模运算，整除后的余数。       |
| ++变量名 | 先把变量的值加1，然后再执行表达式。 |
| 变量名++ |   先执行表达式，再把变量的值加1。   |
| --变量名 | 先把变量的值减1，然后再执行表达式。 |
| 变量名-- |    先执行表达式，再把变量的减1。    |
|  **=**   |   c = a + b; 将把a + b的值赋给c。   |
|  **+=**  |      c += a; 相当于 c = c + a;      |
|  **-=**  |      c -= a; 相当于 c = c - a;      |
|  ***=**  |      c *= a; 相当于 c = c * a;      |
|  **/=**  |      c /= a; 相当于 c = c / a;      |
|    %=    |      c %= a; 相当于 c = c % a;      |

整数进行除法运算时，如果分母为0，程序将异常退出；浮点数进行除法运算时，如果分母为0.0，将得到inf（无穷大）。

两个整数进行除法运算时，将舍去小数部分，得到一个整数；整数与浮点数进行除法运算时，得到的结果是浮点数。

进行除法运算时，在整数前面加(float)或(double)可以将整数转换为float或double类型。

取模运算只能用于整数（分母也不能为0）。

|      关系       |                            符号                            |
| :-------------: | :--------------------------------------------------------: |
|      等于       |                             ==                             |
|     不等于      |                             !=                             |
|      小于       |                             <                              |
|      大于       |                             >                              |
|    大于等于     |                             >=                             |
|  &&（`a&&b;`）  |           如果a和b都为真，则结果为真，否则为假。           |
| \|\|（`a||b;`） | 如果a和b中有一个为真，则结果为真，二者都为假时，结果为假。 |
|   ！（`!a;`）   |        如果a为假，则!a为真； 如果a为真，则!a为假。         |
|                 |                                                            |

关系运算符的两边可以是数值，也可以是表达式；

用`std::cout`输出关系运算表达式时，关系表达式要加括号；

关系运算也适用于字符串（string），字符串常用的关系运算是==和!=。

逻辑运算符的两边可以是数值，也可以是表达式；

用`std::cout`输出逻辑运算表达式时，逻辑表达式要加括号；
`cout << "a&&b=" << (a && b) << endl;`

## 六、条件

### （一）、if语句

```
`if (表达式)`
`{`
  `// 表达式为真时执行的语句。`
`}`
`else`
`{`
  `// 表达式为假时执行的语句。`
`}`
```

### （二）、switch语句

```
`switch (表达式)`
`{`
  `case 值一:` 
    `语句一;` 
    `break;`
  `case 值二:` 
    `语句二;` 
    `break;`
  `......`
  `case 值n:` 
    `语句n;` 
    `break;`
  `default:` 
    `上述条件都不满足时执行的语句;`
`}`
```

`case`后面必须是整数、字符，或者是结果为整数和字符的表达式，但不能使用变量。

`default`不是必须的，当没有`default`时，如果全部的`case`匹配失败，那么就什么都不执行。

每个分支不要漏写`break;`语句。

## 七、循环

### （一）、while循环

```
while (表达式)
{
  语句块
}
```

`break`和`continue`两个关键字用于控制循环体中代码的执行流程。

`break`跳出（中止）当前循环语句。

`continue`回到当前循环语句的首部。

### （二）、for循环

```
for (语句一 ; 表达式 ; 语句二)
{
  语句块
}
```

（1）循环开始时，先执行语句一，在整个循环过程中语句一只会被执行一次。

（2）计算表达式的值，如果为真，就执行一次循环体中的语句块。

（3）执行完语句块后，执行一次语句二。

（4）重复第（2）步和第（3），直到表达式的值不为真才结束for循环。

## 八、函数

```
返回值的数据类型 函数名(参数一的数据类型 参数一, 参数二的数据类型 参数二,……)
{
  实现函数功能的代码。
  return 返回值;
}
```

函数的声明和定义可以书写在一起，也可以分开，如果书写在一起，一般放在main函数的上面，如果分开，一般在main函数的上面声明，在main函数的下面定义。
```
函数名(参数一,参数二,……);       \\有分号
```
**实参：**调用者程序中书写的在函数名括号中的参数，可以是常量、变量和表达式。

**形参：**函数的参数列表。

函数的声明必须和函数的定义一致（返回值的数据类型、函数名和参数列表），如果函数名和参数列表不同，表示它们不是同一个函数。

return语句返回值的数据类型必须与函数的声明一致。

在函数体中，return语句可以多次使用。

如果函数的重点是实现功能，不关心返回值，返回值的数据类型填void，return语句后面就空着。函数可以没有任何参数。

### （一）、递归函数

一个函数可以调用另一个函数，作为特例，如果函数调用了自己，就像故事中提到了同样的故事一样，我们把函数在运行时调用自己的情况叫做递归。递归函数中一定要有递归终止的条件，否则是死递归。

```
#include <iostream>     // 包含头文件。
using namespace std; // 指定缺省的命名空间。

int f(int x)              // 递归函数。
{
   if (x == 0) return 0;    // 递归终止的条件。
   return x + f(x - 1);     // 在函数体中调用了自己。
}

int main()
{
   cout << "f(100)=" << f(100) << endl;
   // 嵌套的调用函数 进入函数的过程是递去 函数返回的过程是归来
   // 计算从1加到100的和。
   int sum = 0;     // 存放累加的值。
   for (int ii = 1; ii <= 100; ii++)
       sum = sum + ii;
   cout << "sum=" << sum << endl;
}
```

### （二）、void关键字

在C++中，void表示为**无类型**，主要有三个用途：

1、函数的返回值用void，表示函数没有返回值。

```
void func(int a,int b)
{
  // 函数体代码。
  return;
}
```

2、函数的参数填void，表示函数不需要参数（或者让参数列表空着）。

```
int func(void)
{
  // 函数体代码。
  return 0;
}
```

3、函数的形参用void \*，表示接受任意数据类型的指针。

```
int func(void*)
{
  // 函数体代码。
  return 0;
}
```

不能用void声明变量，它不能代表一个真实的变量。

不能对void *指针直接解引用（需要转换成其它类型的指针）。

把其它类型的指针赋值给void*指针不需要转换；把void *指针赋值给把其它类型的指针需要转换。

## 九、分文件编写

**头文件（\*.h）**：需要包含的头文件，声明全局变量，函数的声明，数据结构和类的声明等。

**源文件（\*.cpp）**：函数的定义、类的定义。

主程序：main函数，程序的核心流程，需要用`#include "头文件名"`把头文件包含进来。

## 十、指针

查找变量的地址：
```
&变量名
```
指针变量简称指针，它是一种特殊的变量，专用于存放变量在内存中的**起始地址**。
```
数据类型 *变量名;   \\声明指针变量
指针 = &变量名;    \\给指针赋值，对指针的赋值操作也通俗的被称为“指向某变量”
```

声明指针变量后，在没有赋值之前，里面是乱七八糟的值，这时候不能使用指针。

`*`运算符被称为**间接值**或**解除引用（解引用）**运算符，将它用于指针，可以得到该地址的内存中存储的值。

```
变量 = *指针 = 值
&变量 = 指针 = 地址
```

用`const`修饰指针，不能通过解引用的方法修改内存地址中的值（用原始的变量名是可以修改的）。

```
const 数据类型 *变量名;
```

一般用于修饰函数的形参，表示不希望在函数里修改内存地址中的值。如果形参的值不需要改变，建议加上`const`修饰，程序可读性更好。

### （一）、二级指针

**指针**是**指针变量**的简称，也是**变量**，是**变量**就有**地址**。**指针**用于存放**普通变量**的**地址**。**二级指针**用于存放**指针变量**的**地址**。

```
数据类型** 指针名;
```

### （二）、空指针

在C和C++中，用0或NULL都可以表示空指针。声明指针后，在赋值之前，让它指向空，表示没有指向任何地址。

**如果对空指针解引用，程序会崩溃。** **在函数中，应该有判断形参是否为空指针的代码，目的是保证程序的健壮性。**

### （三）、函数指针

```
函数返回值类型 （*函数指针名）（函数参数列表） \\声明函数指针语法

int  (*pfa)(int,string);
bool (*pfb)(int,string);
bool (*pfc)(int);
```

函数名就是函数的地址。函数指针的赋值：

```
函数指针名=函数名;
```

函数指针的调用

```
(*函数指针名)(实参);   \\C
函数指针名(实参);   \\C++
```

```
#include <iostream>     // 包含头文件。
using namespace std;    // 指定缺省的命名空间。

void zs(int a)     // 张三的个性化表白函数。
{
   cout <<"a=" << a << "我要先翻三个跟斗再表白。\n";  // 个性化表白的代码。
}

void ls(int a)     // 李四的个性化表白函数。
{
   cout << "a=" << a << "我有一只小小鸟。\n";  // 个性化表白的代码。
} 

void show(void (*pf)(int),int b)
{
   cout << "表白之前的准备工作已完成。\n";    // 表白之前的准备工作。
   pf(b);                                   // 用函数指针名调用个性化表白函数。
   cout << "表白之后的收尾工作已完成。\n";    // 表白之后的收尾工作。
}

int main()
{
   show(zs, 3);     // 张三要表白。
   show(ls, 4);     // 李四要表白。
}
```



## 十一、内存

## 十二、数组

创建数组，声明数组的语法：

```
数据类型 数组名[数组长度];
数据类型 数组名[数组长度] = { 值1，值2，值3, ...... , 值n};
数据类型 数组名[ ] = { 值1，值2，值3, ...... , 值n}; //可以不写数组长度
数据类型 数组名[数组长度] = { 0 };  // 把全部的元素初始化为0。 
数据类型 数组名[数组长度] = { };    // 把全部的元素初始化为0。
```

可以通过下标访问数组中元素，数组下标从0开始。数组中每个元素的特征和使用方法与单个变量完全相同。

```
语法：数组名[数组下标]     //数组下标0~数组长度-1，不能是-1
```

用memset()函数可以把数组中全部的元素清零。（只适用于C++基本数据类型）函数原型：

```
memset(void *s, int c, size_t n);  //第一个填数组名，第二个填0，第三个填数组占内存空间的大小
```

用memcpy()函数可以把数组中全部的元素复制到另一个相同大小的数组。（只适用于C++基本数据类型）函数原型：

```
memcpy(void *dest, const void *src, size_t n);  //目标，被复制的，占用空间的大小
```


